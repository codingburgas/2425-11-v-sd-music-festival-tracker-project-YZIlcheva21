@model MusicFestivalManagementSystem.Models.LoginViewModel

@{
    ViewData["Title"] = "Login";
}

<style>
    body {
        background-color: #f8f9fa;
        font-family: 'Arial', sans-serif;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
    }

    .login-container {
        background: #fff;
        padding: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
    }

    h2.text-center {
        font-weight: bold;
        color: #343a40;
    }

    .form-control {
        border-radius: 0.5rem;
        border: 1px solid #ced4da;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: #80bdff;
        box-shadow: 0 0 5px rgba(128, 189, 255, 0.5);
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        transform: scale(1.02);
    }

    .alert {
        border-radius: 0.5rem;
    }

    #loadingSpinner {
        font-size: 0.9rem;
        color: #6c757d;
    }

    a {
        color: #007bff;
        text-decoration: none;
        transition: color 0.2s ease;
    }

    a:hover {
        color: #0056b3;
        text-decoration: underline;
    }

    .form-check-label {
        cursor: pointer;
    }
</style>

<div class="login-container">
    <h2 class="text-center">@ViewData["Title"]</h2>

    <!-- Error Message -->
    @if (ViewData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger" role="alert">
            @ViewData["ErrorMessage"]
        </div>
    }

    <form asp-action="Login" method="post" role="form">
        @Html.AntiForgeryToken() <!-- CSRF Protection -->
        <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

        <!-- Username -->
        <div class="form-group mb-3">
            <label asp-for="Username" class="form-label">Username</label>
            <input asp-for="Username" class="form-control" placeholder="Enter your username" aria-label="Username" aria-describedby="usernameHelp" autocomplete="username" required />
            <span asp-validation-for="Username" class="text-danger" id="usernameHelp"></span>
        </div>

        <!-- Password -->
        <div class="form-group mb-3">
            <label asp-for="Password" class="form-label">Password</label>
            <input asp-for="Password" type="password" class="form-control" placeholder="Enter your password" aria-label="Password" aria-describedby="passwordHelp" autocomplete="current-password" required />
            <span asp-validation-for="Password" class="text-danger" id="passwordHelp"></span>
        </div>

        <!-- Remember Me -->
        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="rememberMe" name="RememberMe" />
            <label class="form-check-label" for="rememberMe" title="Stay logged in on this device" data-bs-toggle="tooltip" data-bs-placement="right">
                Remember me
            </label>
        </div>

        <!-- Submit Button -->
        <button id="loginButton" type="submit" class="btn btn-primary w-100">Login</button>
        <div id="loadingSpinner" class="text-center mt-2" style="display: none;">
            <span class="spinner-border text-primary" role="status" aria-hidden="true"></span>
            <span>Logging in...</span>
        </div>
    </form>

    <p class="text-center mt-3">
        Don't have an account? <a asp-action="Register" asp-controller="Account">Register here</a>
    </p>

    <p class="text-center mt-3">
        Forgot your password? <a asp-action="ForgotPassword" asp-controller="Account">Click here</a>
    </p>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Loading Spinner Script
        document.querySelector('form').addEventListener('submit', function () {
            const submitButton = document.querySelector('#loginButton');
            const spinner = document.querySelector('#loadingSpinner');
            submitButton.disabled = true;
            spinner.style.display = 'block';
        });

        // Tooltip Initialization
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        });
    </script>
}
